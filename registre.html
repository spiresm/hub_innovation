<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registre de Projets - Tech Innovation Hub</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        :root {
            --bs-primary: #007bff;
            --bs-light: #f8f9fa;
            --bs-success: #28a745;
            --bs-warning: #ffc107;
            --bs-info: #17a2b8;
            --bs-background-light: #f1f2f7; 
        }
        body { background-color: var(--bs-background-light); }
        .navbar { 
            background-color: white; 
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,.05);
        }
        
        .sidebar { 
            background: white; 
            padding: 1.5rem; 
            border-radius: 0.5rem; 
            box-shadow: 0 0.25rem 0.5rem rgba(0,0,0,.05);
            height: fit-content;
        }

        .project-card {
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            border: none;
            border-radius: 0.75rem;
            overflow: hidden;
            height: 100%;
        }
        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1rem rgba(0,0,0,.15);
        }

        .card-body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card-thumbnail-container {
            height: 150px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #eee;
        }

        .card-thumbnail {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-icon {
            color: var(--bs-primary);
            font-size: 3rem;
        }
    </style>
</head>
<body>

    <div class="modal fade" id="newProjectModal" tabindex="-1" aria-labelledby="newProjectModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newProjectModalLabel"><i class="fas fa-plus-circle me-2"></i> Ajouter un Nouveau Projet</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <form name="nouveau_projet" method="POST" data-netlify="true" netlify-honeypot="bot-field" action="/success" enctype="multipart/form-data">
                    <input type="hidden" name="form-name" value="nouveau_projet" />
                    <p class="d-none">
                        <label>Don’t fill this out if you’re human: <input name="bot-field" /></label>
                    </p>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="projectNom" class="form-label fw-bold">Nom du Projet *</label>
                                    <input type="text" class="form-control" id="projectNom" name="nom" required>
                                </div>
                                <div class="mb-3">
                                    <label for="projectResponsable" class="form-label fw-bold">Responsable (Initiales) *</label>
                                    <input type="text" class="form-control" id="projectResponsable" name="responsable" placeholder="Ex: LEL, HMA" required>
                                </div>
                                <div class="mb-3">
                                    <label for="projectContribution" class="form-label fw-bold">Domaine de Contribution *</label>
                                    <select id="projectContribution" class="form-select" name="contribution" required>
                                        <option value="">Sélectionner...</option>
                                        <option value="Stratégie">Stratégie</option>
                                        <option value="Projet">Projet</option>
                                        <option value="Veille">Veille</option>
                                        <option value="Marketing">Marketing</option>
                                        <option value="Diffusion">Diffusion</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="projectStatut" class="form-label fw-bold">Statut Initial *</label>
                                    <select id="projectStatut" class="form-select" name="statut" required>
                                        <option value="Idée à Analyser" selected>Idée / à Analyser</option>
                                        <option value="POC">POC</option>
                                        <option value="En cours">En cours</option>
                                        <option value="Validé">Validé</option>
                                        <option value="Non démarré">Non démarré / Parking</option>
                                        <option value="Clôturée">Clôturée</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="projectDescriptionCourte" class="form-label fw-bold">Description Courte *</label>
                                    <input type="text" class="form-control" id="projectDescriptionCourte" name="description_courte" placeholder="Max 100 caractères" required>
                                </div>
                                <div class="mb-3">
                                    <label for="projectDescriptionDetaillee" class="form-label fw-bold">Description Détaillée</label>
                                    <textarea class="form-control" id="projectDescriptionDetaillee" name="description_detaillee" rows="3"></textarea>
                                </div>

                                <div class="mb-3">
                                    <label for="projectVignette" class="form-label fw-bold">Vignette d'Illustration (Image)</label>
                                    <input type="file" class="form-control" id="projectVignette" name="vignette" accept="image/*">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="projectMotsCles" class="form-label fw-bold">Mots-clés (séparés par des virgules)</label>
                                    <input type="text" class="form-control" id="projectMotsCles" name="mots_cles" placeholder="Ex: IA, Cloud, Veille">
                                </div>
                                <div class="mb-3">
                                    <label for="projectEcheance" class="form-label fw-bold">Échéance (Date)</label>
                                    <input type="date" class="form-control" id="projectEcheance" name="echeance">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane me-2"></i> Soumettre le Projet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <div id="header-placeholder"></div>

    <div class="container-lg my-5">
        <h1 class="fw-bolder mb-1">Registre des Projets</h1>
        <p class="text-muted mb-4">La liste complète des initiatives d'innovation et de veille technologique.</p>

        <div class="row">
            
            <div class="col-lg-3">
                <div class="sidebar mb-4">
                    <h5 class="mb-3 text-dark"><i class="fas fa-filter me-2"></i> Filtres</h5>
                    
                    <div class="mb-3">
                        <label for="statutFilter" class="form-label small fw-bold">Statut</label>
                        <select id="statutFilter" class="form-select form-select-sm">
                            <option value="Tous">Tous les statuts</option>
                            <option value="Validé">Validé</option>
                            <option value="POC En Cours">POC En Cours</option>
                            <option value="POC">POC</option>
                            <option value="Idée">Idée / à Analyser</option>
                            <option value="Parking">Parking / Non démarré</option>
                            <option value="Clôturée">Clôturée</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="responsableFilter" class="form-label small fw-bold">Responsable (Initiales)</label>
                        <input type="text" id="responsableFilter" class="form-control form-control-sm" placeholder="Ex: LEL, HMA...">
                    </div>

                    <div class="mb-3">
                        <label for="contributionFilter" class="form-label small fw-bold">Domaine de Contribution</label>
                        <select id="contributionFilter" class="form-select form-select-sm">
                            <option value="Toutes">Tous les domaines</option>
                            <option value="Stratégie">Stratégie</option>
                            <option value="Projet">Projet</option>
                            <option value="Veille">Veille</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Diffusion">Diffusion</option>
                        </select>
                    </div>

                    <button id="resetButton" class="btn btn-sm btn-outline-secondary w-100">Réinitialiser les filtres</button>
                </div>
            </div>

            <div class="col-lg-9">
                <div id="project-list" class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
                    </div>
                <div id="no-results" class="text-center text-muted mt-5" style="display: none;">
                    <i class="fas fa-exclamation-circle fa-3x mb-3"></i>
                    <p class="h5">Aucun projet ne correspond aux filtres.</p>
                </div>
            </div>

        </div>
    </div>

    <script>
        // DONNÉES DE PROJETS (Correction des statuts incohérents)
        const projectsData = [
            { 
                id: "H25001", nom: "Jean-Paul IA", description_courte: "LLM technodoc", statut: "En cours", responsable: "HMA", contribution: "Stratégie", echeance: "30/06/2026", icon: "fas fa-brain", image_id: "images/jean_paul_ia.jpg", progression: 60,
                description_detaillee: "Le projet Jean-Paul IA vise à intégrer un grand modèle de langage (LLM) dans l'environnement intranet pour faciliter l'accès à la documentation technique, la recherche rapide et la génération de résumés complexes. L'objectif est d'améliorer l'efficacité des équipes de support et de développement en fournissant des réponses instantanées et précises basées sur notre base de connaissances interne. Le POC initial se concentre sur l'indexation des documents de production.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Chef de Projet"}, {initiales: "HMA", nom: "Hugo MAUX", role: "Coach IA"}, {initiales: "TFG", nom: "Thierry GAUDIER", role: "Développeur Principal"}], 
                mots_cles: ["IA", "LLM", "Documentation", "Intranet", "Technologie"]
            },
            { 
                id: "H25002", nom: "Cuno.IO", description_courte: "Émuler un stockage local depuis un bucket S3 pour la veille technique.", statut: "Non démarré", responsable: "LEL", contribution: "Stratégie", echeance: "N/A", icon: "fas fa-cloud-upload-alt", image_id: "images/cuno_io.jpg", progression: 0,
                description_detaillee: "Ce projet est une veille technologique visant à explorer des solutions permettant d'émuler un système de fichiers local basé sur un stockage objet cloud (S3). Le but est de simplifier l'accès aux données pour les outils legacy sans nécessiter une réarchitecture complète. Actuellement en phase d'évaluation des produits open source disponibles.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Porteur du sujet"}],
                mots_cles: ["Cloud", "S3", "Stockage", "Veille", "Open Source"]
            },
            { 
                id: "H25003", nom: "Segmentation Programme CGO", description_courte: "Segmentation du Programme CGO pour optimiser les ressources et les objectifs.", statut: "Idée à Analyser", responsable: "LEL", contribution: "Projet", echeance: "N/A", icon: "fas fa-chart-pie", image_id: "images/segmentation_cgo.jpg", progression: 10,
                description_detaillee: "Analyse préliminaire nécessaire pour segmenter et prioriser les différentes composantes du Programme CGO. L'objectif est de définir des lots de travail clairs et mesurables pour une meilleure gestion du portefeuille de projets et une allocation plus efficace du budget.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Chef de Projet"}, {initiales: "ABRU", nom: "Alice BRUN", role: "PMO"}],
                mots_cles: ["Programme", "Gestion", "Portefeuille", "Analyse"]
            },
            { 
                id: "H25004", nom: "Vitrine", description_courte: "Automatiser la création et la publication des vitrines Marketing.", statut: "Clôturée", responsable: "ABRU", contribution: "Marketing", echeance: "08/10/2025", icon: "fas fa-desktop", image_id: "images/vitrines.jpg", progression: 100,
                description_detaillee: "Projet clos. Mise en place d'un outil CI/CD et of templates pour automatiser la création et le déploiement des sites vitrines (marketing) avec un minimum d'intervention manuelle. L'objectif d'accélération de la mise sur le marché a été atteint. Les outils sont désormais en production.",
                equipe: [{initiales: "ABRU", nom: "Alice BRUN", role: "Responsable Marketing"}, {initiales: "TFG", nom: "Thierry GAUDIER", role: "Intégrateur"}],
                mots_cles: ["Marketing", "Automatisation", "CI/CD", "Web"]
            },
            { 
                id: "H25005", nom: "Diffusion Légère Mobile", description_courte: "Valider l'utilisation d'éléments mobiles dans le contexte de diffusion.", statut: "POC", responsable: "LEL", contribution: "Diffusion", echeance: "01/07/2025", icon: "fas fa-mobile-alt", image_id: "images/connection_mobile.jpg", progression: 40,
                description_detaillee: "Mener un POC (Proof of Concept) pour évaluer la fiabilité et la qualité de la diffusion en direct via des équipements légers et mobiles (smartphones, petits émetteurs 4G/5G). L'étude inclut des tests de latence et de robustesse du signal en conditions réelles. Un rapport final est attendu pour l'été.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Chef de Projet"}, {initiales: "ETRHO", nom: "Eric RHO", role: "Technicien Diffusion"}], 
                mots_cles: ["Diffusion", "Mobile", "4G/5G", "POC", "Streaming"]
            },
            { 
                id: "H25006", nom: "Garantir flux 4G Radio Légère", description_courte: "parfois le signal 4G est saturé. Autre proposition...", statut: "Non démarré", responsable: "LEL", contribution: "Veille", echeance: "N/A", icon: "fas fa-broadcast-tower", image_id: "images/flux4g.jpg", progression: 0,
                description_detaillee: "Face à la saturation ponctuelle du réseau 4G pour les unités de reportage légères, cette veille étudie des solutions d'agrégation de liens et de QoS (Quality of Service) pour garantir la stabilité et le débit des flux Radio. Les technologies de bonding sont la cible principale.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Porteur du sujet"}],
                mots_cles: ["4G", "Radio", "Réseau", "QoS", "Bonding"]
            },
            { 
                id: "H25007", nom: "Conformité R128 Musiq3", description_courte: "Mise en conformité des contenus audio de Musiq3 à la norme R128 (Loudness).", statut: "En cours", responsable: "CPU", contribution: "Stratégie", echeance: "30/10/2025", icon: "fas fa-volume-up", image_id: "images/conformite_r128.jpg", progression: 80,
                description_detaillee: "Standardisation du niveau sonore (Loudness) des programmes de la chaîne Musiq3 selon la norme EBU R128. Ceci implique la mise à jour des workflows de post-production et l'acquisition d'outils de mesure pour garantir une expérience d'écoute homogène. Phase d'intégration en cours.",
                equipe: [{initiales: "CPU", nom: "Claire POU", role: "Chef de Projet"}, {initiales: "ETRHO", nom: "Eric RHO", role: "Expert Audio"}],
                mots_cles: ["Audio", "R128", "Loudness", "Production", "Conformité"]
            },
            { 
                id: "H25008", nom: "MIA (LLM Co-pilot)", description_courte: "Utilisation d'un agent IA type copilot et d'un répertoire dans sharepoint pour valider le concept.", statut: "En concept", responsable: "LEL", contribution: "Stratégie", echeance: "30/08/2025", icon: "fas fa-robot", image_id: "images/mia_llm.jpg", progression: 80,
                description_detaillee: "Mise en place d'un chatbot 'MIA' basé sur un LLM (Large Language Model) capable d'interagir avec les utilisateurs pour répondre à des questions spécifiques sur la plateforme MediaSphere, simulant un co-pilote d'assistance technique. Le projet est en phase de test utilisateur avancé.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Chef de Projet"}, {initiales: "HMA", nom: "Hugo MAUX", role: "Expert IA"}, {initiales: "TFG", nom: "Thierry GAUDIER", role: "Développeur"}],
                mots_cles: ["IA", "Chatbot", "LLM", "MediaSphere", "Assistance"]
            },
            { 
                id: "H25009", nom: "AI driven voice e...", description_courte: "Mettre en place un outil capable de répondre à différentes questions à l'aide d'une interface avec un avatar.", statut: "Idée", responsable: "LEL", contribution: "Veille", echeance: "N/A", icon: "fas fa-headset", image_id: "images/ai_voice_editing.jpg", progression: 5,
                description_detaillee: "Veille sur les technologies d'avatars et de synthèse vocale basées sur l'IA. L'objectif est d'étudier la faisabilité d'une interface utilisateur conversationnelle et visuelle pour des applications internes ou grand public. Le sujet est à un stade très précoce (simple idée).",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Porteur du sujet"}],
                mots_cles: ["IA", "Avatar", "Synthèse Vocale", "Veille", "UX"]
            },
            { 
                id: "H25010", nom: "Bornes d'Apport Autonome", description_courte: "Création d'un prototype de borne d'apport autonome.", statut: "Clôturée", responsable: "ABRU", contribution: "Projet", echeance: "17/09/2025", icon: "fas fa-box-open", image_id: "images/bornes_autonomes.jpg", progression: 100,
                description_detaillee: "Projet clos. Conception et réalisation d'un prototype de borne permettant l'apport de contenus par des contributeurs externes sans assistance humaine, simplifiant les workflows d'acquisition. Le prototype a été validé et est passé en phase d'industrialisation.",
                equipe: [{initiales: "ABRU", nom: "Alice BRUN", role: "Chef de Projet"}, {initiales: "ASR", nom: "Amélie SER", role: "Designer UX/UI"}],
                mots_cles: ["Acquisition", "Matériel", "Prototype", "Workflow"]
            },
            { 
                id: "H25011", nom: "Les yeux de Samia", description_courte: "Système permettant de voir si quelqu'un se trouve en face d'un micro donne autour d'une table dans un studio.", statut: "En cours", responsable: "ASR", contribution: "Stratégie", echeance: "30/08/2025", icon: "fas fa-video", image_id: "images/yeux_de_samia.jpg", progression: 60,
                description_detaillee: "Développement d'un système de vision par ordinateur ('Les yeux de Samia') dans les studios pour analyser les scènes, détecter les mouvements et les positions, afin de générer ou de proposer automatiquement des presets de caméra. Le POC est en phase d'expérimentation en studio de répétition.",
                equipe: [{initiales: "ASR", nom: "Amélie SER", role: "Chef de Projet"}, {initiales: "HMA", nom: "Hugo MAUX", role: "Expert Vision"}],
                mots_cles: ["Vision", "Studio", "IA", "Caméra", "Presets"]
            },
            { 
                id: "H25012", nom: "Reporting Portefeuille", description_courte: "Créer, challenger des affichages de reporting pour la gouvernance de nos portefeuilles de projet", statut: "POC", responsable: "ABRU", contribution: "Projet", echeance: "N/A", icon: "fas fa-chart-line", image_id: "images/portfolio_dashboard.jpg", progression: 40,
                description_detaillee: "Conception d'un tableau de bord (Dashboard) pour la gouvernance, consolidant les données de planification et de portefeuille de projets. Ce POC vise à tester les outils de visualisation et la pertinence des métriques pour les comités de direction.",
                equipe: [{initiales: "ABRU", nom: "Alice BRUN", role: "PMO"}, {initiales: "CPU", nom: "Claire POU", role: "Data Analyst"}],
                mots_cles: ["PMO", "Rapport", "Gouvernance", "Dashboard", "Planning"]
            },
            { 
                id: "H25013", nom: "Alternative RPA", description_courte: "Trouver un outil de gestion de projets après la fin de vie de la solution RPA actuelle.", statut: "Idée à Analyser", responsable: "TFG", contribution: "Veille", echeance: "N/A", icon: "fas fa-robot", image_id: "images/alternative_rpa.jpg", progression: 10,
                description_detaillee: "Suite à l'obsolescence ou la fin de vie du logiciel de Robot Process Automation (RPA), ce projet vise à identifier et évaluer une solution alternative moderne, se concentrant sur les plateformes 'Low-Code' ou 'No-Code' pour l'automatisation des processus. Phase de recueil des besoins en cours.",
                equipe: [{initiales: "TFG", nom: "Thierry GAUDIER", role: "Porteur du sujet"}, {initiales: "CACE", nom: "Charles ACE", role: "Expert Processus"}],
                mots_cles: ["RPA", "Automatisation", "Low-Code", "No-Code", "Veille"]
            },
            { 
                id: "H25014", nom: "Plateforme Génération de Contenus", description_courte: "Plateforme collaborative de création de contenus (Politicité).", statut: "Clôturée", responsable: "ABRU", contribution: "Stratégie", echeance: "15/12/2025", icon: "fas fa-users", image_id: "images/plateforme_contenus.jpg", progression: 100,
                description_detaillee: "Projet clos. Développement et déploiement d'une plateforme collaborative pour la création de contenus par différents contributeurs (Politicité). La plateforme est maintenant en production et gérée par l'équipe Contenus.",
                equipe: [{initiales: "ABRU", nom: "Alice BRUN", role: "Chef de Projet"}],
                mots_cles: ["Contenus", "Plateforme", "Collaboration", "Politicité"]
            },
            { 
                id: "H25015", nom: "COMPL AI", description_courte: "Disposer d'un outil pour mesurer la conformité des LLM que nous utilisons par rapport à l'AI Act.", statut: "Non démarré", responsable: "CACE", contribution: "Stratégie", echeance: "N/A", icon: "fas fa-gavel", image_id: "images/compl_ai.jpg", progression: 0,
                description_detaillee: "Disposer d'un outil pour mesurer la conformité des LLM que nous utilisons par rapport à AI Act. L'objectif est de proposer une suite d'évaluations orientée LLM, d'offrir une première interprétation technique compréhensive de l'IA ACT.",
                equipe: [{initiales: "CACE", nom: "Charles ACE", role: "Responsable Conformité"}, {initiales: "HMA", nom: "Hugo MAUX", role: "Expert IA"}],
                mots_cles: ["IA Act", "Conformité", "Réglementation", "LLM", "Stratégie"]
            },
            { 
                id: "H25016", nom: "WAIOH - HIT", description_courte: "Analyse des solutions de voix de synthèse", statut: "POC", responsable: "LEL", contribution: "Veille", echeance: "N/A", icon: "fas fa-volume-up", image_id: "images/analyse_voix_synth.jpg", progression: 40,
                description_detaillee: "Veille et POC sur les technologies de voix de synthèse (Text-to-Speech) pour évaluer la qualité et l'intégration des voix générées dans les productions (Projet H.I.T). Les tests se concentrent sur le naturel des intonations et la personnalisation des voix.",
                equipe: [{initiales: "BLE", nom: "Benoit Leloutre", role: "Innovation Officer"}, {initiales: "TFG", nom: "Thierry Gaulier", role: "Référent IA"}],
                mots_cles: ["Voix", "Synthèse", "Text-to-Speech", "Audio", "IA"]
            },
            { 
                id: "H25017", nom: "Connecteur NDI", description_courte: "Développement d'un connecteur NDI sur l'environnement de production.", statut: "Idée", responsable: "ETRHO", contribution: "Projet", echeance: "N/A", icon: "fas fa-plug", image_id: "images/ndi_connector.jpg", progression: 5,
                description_detaillee: "Idée de projet visant à créer un connecteur pour l'interface NDI (Network Device Interface) afin d'améliorer la flexibilité et la compatibilité des équipements de production sur le réseau IP. Analyse de faisabilité technique à venir.",
                equipe: [{initiales: "ETRHO", nom: "Eric RHO", role: "Expert Vidéo/Réseau"}],
                mots_cles: ["NDI", "Production", "Vidéo", "Réseau", "IP"]
            },
            { 
                id: "H25018", nom: "Chatbot vocal sur sources FCR", description_courte: "Chatbot spécialisé sur les sources FCR, accessible vocalement.", statut: "Idée à Analyser", responsable: "LCTH", contribution: "Projet", echeance: "N/A", icon: "fas fa-microphone-alt", image_id: "images/voice_chatbot_fcr.jpg", progression: 10,
                description_detaillee: "Développement potentiel d'un chatbot vocal capable d'interroger et de synthétiser des informations provenant des sources FCR (Fournisseurs de Contenus et de Ressources). L'objectif est d'accélérer la recherche d'informations opérationnelles. Analyse des technologies vocales requise.",
                equipe: [{initiales: "LCTH", nom: "Luc CATH", role: "Chef de Projet"}, {initiales: "HMA", nom: "Hugo MAUX", role: "Expert IA"}],
                mots_cles: ["Chatbot", "Vocal", "FCR", "IA", "Recherche"]
            },
            { 
                id: "H25999", nom: "Remonter budget sur la veille", description_courte: "Permettre de mettre du budget sur la veille pour des expérimentations rapides.", statut: "Parking", responsable: "LEL", contribution: "Veille", echeance: "N/A", icon: "fas fa-euro-sign", image_id: "images/budget_insight.jpg", progression: 0,
                description_detaillee: "Proposition stratégique visant à sécuriser une enveloppe budgétaire dédiée aux initiatives de veille technologique. L'objectif est de pouvoir financer des POCs très rapides et peu coûteux sans passer par le cycle complet de budgétisation des projets. En attente de validation de la direction.",
                equipe: [{initiales: "LEL", nom: "Laura ELM", role: "Porteur du sujet"}, {initiales: "ABRU", nom: "Alice BRUN", role: "PMO"}],
                mots_cles: ["Budget", "Veille", "POC", "Gouvernance", "Finance"]
            }
        ];

        const projectList = document.getElementById('project-list');
        const noResults = document.getElementById('no-results');
        const statutFilter = document.getElementById('statutFilter');
        const responsableFilter = document.getElementById('responsableFilter');
        const contributionFilter = document.getElementById('contributionFilter');
        const resetButton = document.getElementById('resetButton');

        // Fonction pour déterminer la classe CSS du statut
        function getStatusClass(statut) {
            if (statut === 'Validé') return 'bg-success';
            if (statut === 'POC En Cours' || statut === 'En cours' || statut === 'En concept') return 'bg-info';
            if (statut === 'POC') return 'bg-warning text-dark';
            if (statut.includes('Idée')) return 'bg-secondary';
            if (statut === 'Clôturée') return 'bg-dark';
            if (statut === 'Parking' || statut === 'Non démarré') return 'bg-danger';
            return 'bg-secondary';
        }

        // Fonction pour créer une carte de projet (Aucun changement)
        function createProjectCard(project) {
            let imageContent;
            
            if (project.image_id) {
                imageContent = `<img src="${project.image_id}" alt="Illustration du projet ${project.nom}" class="card-thumbnail">`;
            } else {
                imageContent = `<div class="d-flex flex-column align-items-center justify-content-center h-100"><i class="${project.icon} card-icon"></i><p class="mt-2 small text-muted">Vignette indisponible</p></div>`;
            }

            const statusClass = getStatusClass(project.statut);

            const progressBar = project.progression > 0 && project.progression < 100 ? 
                `<div class="progress" role="progressbar" aria-label="Progression" aria-valuenow="${project.progression}" aria-valuemin="0" aria-valuemax="100" style="height: 5px; margin-top: 10px;">
                    <div class="progress-bar bg-primary" style="width: ${project.progression}%"></div>
                </div>` : '';

            const cardHtml = `
                <div class="col">
                    <div class="card project-card" onclick="window.location.href='fiche-projet.html?id=${project.id}'">
                        <div class="card-thumbnail-container">
                            ${imageContent}
                        </div>
                        <div class="card-body">
                            <h5 class="card-title fw-bold text-dark">${project.nom}</h5>
                            <span class="badge rounded-pill ${statusClass} float-end">${project.statut}</span>
                            <p class="card-text small text-muted mt-2">${project.description_courte}</p>
                            ${progressBar}
                            <div class="mt-auto pt-2 border-top small">
                                <div><i class="fas fa-user-circle me-1"></i> Responsable: <strong>${project.responsable}</strong></div>
                                <div><i class="fas fa-tag me-1"></i> Contribution: ${project.contribution}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            return cardHtml;
        }

        // ... (Fonctions renderProjects et applyFilters conservées) ...

        function renderProjects(data) {
            projectList.innerHTML = '';
            if (data.length === 0) {
                noResults.style.display = 'block';
            } else {
                noResults.style.display = 'none';
                data.forEach(project => {
                    projectList.innerHTML += createProjectCard(project);
                });
            }
        }

        function applyFilters() {
            const selectedStatut = statutFilter.value;
            const selectedResponsable = responsableFilter.value.toUpperCase().trim();
            const selectedContribution = contributionFilter.value;

            const filteredData = projectsData.filter(project => {
                const statutMatch = (selectedStatut === 'Tous') ||
                                    (selectedStatut === 'Idée' && (project.statut.includes('Idée') || project.statut === 'Idée à Analyser')) ||
                                    (selectedStatut === 'Parking' && (project.statut === 'Parking' || project.statut === 'Non démarré')) ||
                                    (project.statut === selectedStatut);

                const responsableMatch = (selectedResponsable === '') || 
                                         project.responsable.toUpperCase().includes(selectedResponsable);
                
                const contributionMatch = (selectedContribution === 'Toutes') || 
                                          (project.contribution === selectedContribution);

                return statutMatch && responsableMatch && contributionMatch;
            });

            renderProjects(filteredData);
        }
        
        // Événements (Conservés)
        statutFilter.addEventListener('change', applyFilters);
        responsableFilter.addEventListener('keyup', applyFilters);
        contributionFilter.addEventListener('change', applyFilters);
        
        resetButton.addEventListener('click', (e) => {
            e.preventDefault();
            statutFilter.value = 'Tous';
            responsableFilter.value = '';
            contributionFilter.value = 'Toutes';
            applyFilters();
        });

        // Appliquer les filtres initiaux avant de charger le header
        applyFilters();


        // NOUVEAU: Logique d'inclusion du header
        function includeHTML(callback) {
            const headerPlaceholder = document.getElementById('header-placeholder');
            if (headerPlaceholder) {
                // Assurez-vous que le fichier header.html est accessible à la racine de votre site
                fetch('header.html')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Erreur de chargement du header.html');
                        }
                        return response.text();
                    })
                    .then(data => {
                        headerPlaceholder.innerHTML = data;
                        if (callback) callback();
                    })
                    .catch(error => console.error(error));
            }
        }

        // Appeler la fonction au chargement du DOM, et mettre à jour le lien actif
        document.addEventListener('DOMContentLoaded', () => {
            includeHTML(() => {
                // Met à jour la classe 'active' sur le lien de la page courante
                const path = window.location.pathname.split('/').pop();
                document.querySelectorAll('#navbarNav .nav-link').forEach(link => {
                    // Si le href du lien correspond au nom du fichier courant
                    if (link.getAttribute('href') === path) {
                        link.classList.add('active', 'fw-bold', 'text-primary');
                        link.classList.remove('text-dark');
                    } else {
                         // On s'assure que les liens inactifs ont un style uniforme
                        link.classList.add('text-dark');
                    }
                });
            });
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>
